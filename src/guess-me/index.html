<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      font-family: 'Arial', sans-serif;
    }
    .guess-button {
      font-size: 30px;
      letter-spacing: 2px;
      text-decoration: none;
      text-transform: uppercase;
      color: #000;
      cursor: pointer;
      border: 4px solid;
      padding: 1rem 2rem;
      box-shadow: 10px 10px 0px 0px, 10px 10px 0px 0px, 10px 10px 0px 0px, 10px 10px 0px 0px, 10px 10px 0px 0px;
      position: relative;
      user-select: none;
      -webkit-user-select: none;
      touch-action: manipulation;
      transition: box-shadow 0.3s ease, top 0.3s ease, left 0.3s ease;
      margin-top: 2rem;
    }

    .guess-button:active {
      box-shadow: 0px 0px 0px 0px;
      top: 5px;
      left: 5px;
    }

    #container {
      text-align: center;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    #counter {
      font-size: 13rem;
      margin-bottom: 20px;
      font-family: "Oswald", sans-serif;
      font-optical-sizing: auto;
      font-weight: 700;
      font-style: normal;
    }

    #guessInput {
      height: 1.8rem;
      border: solid;
      text-align: center;
      /* Center the text horizontally */
      line-height: 1.8rem;
      /* Center the text vertically */
      -moz-appearance: textfield;
      /* For Firefox */
      appearance: textfield;
      /* Disable increment/decrement buttons in most browsers */
      /* Hide the number input spinners for Webkit browsers (Chrome, Safari) */
      -webkit-appearance: none;
      margin: 0;
      /* Remove the default margin */
    }

    #guessInput::-webkit-inner-spin-button,
    #guessInput::-webkit-outer-spin-button {
      -webkit-appearance: none;
      /* Hide the inner and outer spin buttons */
      margin: 0;
      /* Remove the default margin */
    }
    #myModal {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      padding: 20px;
      background-color: #fff;
      border: 2px solid #000;
      z-index: 1;
    }

    #modalContent {
      text-align: center;
    }

    #closeModalBtn {
      cursor: pointer;
    }
  </style>
  <title>Guess Me</title>
</head>

<body>
  <div id="container">
    <!-- Counter -->
    <div id="counter">0</div>
    <!--  Guess Input Field -->
    <label for="guessInput">Enter your guess:</label><br>
    <input type="number" id="guessInput" min="1" max="100"><br>
    <button onclick="submitGuess()" class="guess-button">Guess</button>
  </div>

  <!-- Modal for winning -->
  <div id="myModal">
    <div id="modalContent">
      <p>Congratulations! You guessed the correct number.</p>
      <button id="closeModalBtn" onclick="closeModal()">Close</button>
    </div>
  </div>

  <script>
    let secretNumber;
    let countingInterval;

    function startCounting() {
      countingInterval = setInterval(updateCounter, 10);
    }

    function stopCounting() {
      clearInterval(countingInterval);
    }

    function openModal() {
      document.getElementById('myModal').style.display = 'block';
    }

    function closeModal() {
      document.getElementById('myModal').style.display = 'none';
    }

    function submitGuess() {
      // Stop the counting when the user submits a guess
      stopCounting();

      // Get user's guess
      const guessInput = document.getElementById('guessInput');
      const guessedNumber = parseInt(guessInput.value, 10);

      // Display the correct number immediately
      document.getElementById('counter').textContent = secretNumber;

      // Check if the guess is correct
      if (guessedNumber === secretNumber) {
        openModal(); // Show the modal
      } else {
        alert(`Sorry, the correct number was ${secretNumber}. Try again!`);
      }

      // Clear the input field
      guessInput.value = '';

      // Generate a new secret number for the next round
      secretNumber = Math.floor(Math.random() * 100) + 1;

      // Reset the counter and start counting again
      document.getElementById('counter').textContent = '0';
      startCounting();
    }

    function updateCounter() {
      const counterElement = document.getElementById('counter');
      const currentNumber = parseInt(counterElement.textContent, 10);
      const randomIncrement = Math.floor(Math.random() * 3) + 1; // Random increment between 1 and 3

      // Stop counting if the current number reaches the guessed number
      if (currentNumber === secretNumber) {
        stopCounting();
      }

      // Randomly increment or decrement the counter
      const newNumber = Math.random() < 0.5 ? currentNumber + randomIncrement : currentNumber - randomIncrement;

      // Ensure the new number is within the range of 1 to 100
      counterElement.textContent = Math.min(100, Math.max(1, newNumber));
    }

    // Generate a secret number between 1 and 100 for the first round
    secretNumber = Math.floor(Math.random() * 100) + 1;

    // Start counting animation for the first round
    startCounting();
  </script>
</body>

</html>